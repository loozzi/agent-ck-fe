# Logic Rule Controller - Quáº£n lÃ½ quy táº¯c logic chá»©ng khoÃ¡n

## Tá»•ng quan

MÃ n hÃ¬nh quáº£n lÃ½ quy táº¯c logic cho phÃ©p trainer táº¡o, chá»‰nh sá»­a, xÃ³a vÃ  quáº£n lÃ½ cÃ¡c quy táº¯c logic giao dá»‹ch chá»©ng khoÃ¡n vá»›i giao diá»‡n drag & drop trá»±c quan.

## TÃ­nh nÄƒng chÃ­nh

### 1. **Giao diá»‡n Drag & Drop**

- KÃ©o tháº£ cÃ¡c Ä‘iá»u kiá»‡n logic
- Sáº¯p xáº¿p thá»© tá»± Ä‘iá»u kiá»‡n dá»… dÃ ng
- Giao diá»‡n block logic rÃµ rÃ ng

### 2. **Form IF-THEN**

- **Náº¾U (IF)**: Äiá»u kiá»‡n logic
  - Chá»‰ bÃ¡o ká»¹ thuáº­t (RSI, MACD, SMA, EMA, Bollinger Bands, Volume, Price)
  - ToÃ¡n tá»­ so sÃ¡nh (>, <, >=, <=, ==, crosses above, crosses below)
  - GiÃ¡ trá»‹ ngÆ°á»¡ng
- **THÃŒ (THEN)**: HÃ nh Ä‘á»™ng
  - Mua (BUY) ğŸ“ˆ
  - BÃ¡n (SELL) ğŸ“‰
  - Giá»¯ (HOLD) âœ‹
  - Cáº£nh bÃ¡o (ALERT) ğŸ””

### 3. **Quáº£n lÃ½ quy táº¯c**

- âœ… **Táº¡o má»›i**: Táº¡o quy táº¯c logic vá»›i dialog
- âœï¸ **Chá»‰nh sá»­a**: Cáº­p nháº­t quy táº¯c hiá»‡n cÃ³
- ğŸ‘ï¸ **Xem chi tiáº¿t**: Xem thÃ´ng tin Ä‘áº§y Ä‘á»§
- ğŸ—‘ï¸ **XÃ³a**: XÃ³a quy táº¯c vá»›i xÃ¡c nháº­n
- ğŸ”„ **Báº­t/Táº¯t**: KÃ­ch hoáº¡t/táº¡m dá»«ng quy táº¯c

### 4. **TÃ¬m kiáº¿m vÃ  lá»c**

- ğŸ” TÃ¬m kiáº¿m theo tÃªn, mÃ´ táº£
- ğŸ¯ Lá»c theo chá»‰ bÃ¡o ká»¹ thuáº­t
- ğŸ¬ Lá»c theo hÃ nh Ä‘á»™ng
- ğŸ“Š Lá»c theo tráº¡ng thÃ¡i (hoáº¡t Ä‘á»™ng/táº¡m dá»«ng)

### 5. **Thá»‘ng kÃª**

- ğŸ“ˆ Tá»•ng sá»‘ quy táº¯c
- âœ… Sá»‘ quy táº¯c Ä‘ang hoáº¡t Ä‘á»™ng
- â¸ï¸ Sá»‘ quy táº¯c táº¡m dá»«ng
- ğŸ“Š PhÃ¢n bá»‘ theo hÃ nh Ä‘á»™ng

## CÃ¡ch sá»­ dá»¥ng

### 1. Táº¡o quy táº¯c má»›i

1. Nháº¥n nÃºt **"Táº¡o quy táº¯c má»›i"**
2. Nháº­p tÃªn vÃ  mÃ´ táº£ quy táº¯c
3. ThÃªm Ä‘iá»u kiá»‡n báº±ng nÃºt **"ThÃªm Ä‘iá»u kiá»‡n"**
4. Chá»n chá»‰ bÃ¡o ká»¹ thuáº­t (VD: RSI)
5. Chá»n toÃ¡n tá»­ so sÃ¡nh (VD: <)
6. Nháº­p giÃ¡ trá»‹ ngÆ°á»¡ng (VD: 30)
7. Chá»n hÃ nh Ä‘á»™ng (VD: Mua)
8. Chá»n khung thá»i gian (VD: 1 ngÃ y)
9. Nháº¥n **"Táº¡o má»›i"**

### 2. Chá»‰nh sá»­a quy táº¯c

1. Nháº¥n menu **"..."** trÃªn card quy táº¯c
2. Chá»n **"Chá»‰nh sá»­a"**
3. Thay Ä‘á»•i thÃ´ng tin cáº§n thiáº¿t
4. Nháº¥n **"Cáº­p nháº­t"**

### 3. Xem chi tiáº¿t quy táº¯c

1. Nháº¥n menu **"..."** trÃªn card quy táº¯c
2. Chá»n **"Xem chi tiáº¿t"**
3. Xem thÃ´ng tin Ä‘áº§y Ä‘á»§ vá» quy táº¯c

### 4. XÃ³a quy táº¯c

1. Nháº¥n menu **"..."** trÃªn card quy táº¯c
2. Chá»n **"XÃ³a"**
3. XÃ¡c nháº­n xÃ³a trong dialog

### 5. Báº­t/Táº¯t quy táº¯c

- Sá»­ dá»¥ng switch trÃªn card quy táº¯c
- Quy táº¯c táº¯t sáº½ cÃ³ mÃ u xÃ¡m má»

## VÃ­ dá»¥ quy táº¯c

### Quy táº¯c mua cá»• phiáº¿u

```
Náº¾U RSI < 30 VÃ€ Volume > 1000000
THÃŒ Mua
```

### Quy táº¯c bÃ¡n cá»• phiáº¿u

```
Náº¾U RSI > 70 VÃ€ MACD crosses below Signal
THÃŒ BÃ¡n
```

### Quy táº¯c cáº£nh bÃ¡o

```
Náº¾U Price crosses above SMA(20)
THÃŒ Cáº£nh bÃ¡o
```

## CÃ´ng nghá»‡ sá»­ dá»¥ng

- **React**: Framework UI
- **TypeScript**: Type safety
- **Redux Toolkit**: State management
- **Tailwind CSS**: Styling
- **Radix UI**: Component library
- **@hello-pangea/dnd**: Drag & drop
- **date-fns**: Date formatting
- **react-toastify**: Notifications

## Cáº¥u trÃºc file

```
src/
â”œâ”€â”€ components/common/
â”‚   â”œâ”€â”€ LogicRuleDialog.tsx          # Dialog táº¡o/sá»­a quy táº¯c
â”‚   â”œâ”€â”€ LogicRuleDetailDialog.tsx    # Dialog xem chi tiáº¿t
â”‚   â”œâ”€â”€ DeleteLogicRuleDialog.tsx    # Dialog xÃ¡c nháº­n xÃ³a
â”‚   â”œâ”€â”€ LogicRuleCard.tsx            # Card hiá»ƒn thá»‹ quy táº¯c
â”‚   â””â”€â”€ LogicRuleController.css      # CSS custom
â”œâ”€â”€ pages/trainer/
â”‚   â””â”€â”€ RuleController.tsx           # MÃ n hÃ¬nh chÃ­nh
â”œâ”€â”€ slices/
â”‚   â””â”€â”€ logicRule.slice.ts           # Redux slice
â”œâ”€â”€ services/
â”‚   â””â”€â”€ logicRule.service.ts         # API service
â””â”€â”€ types/
    â””â”€â”€ logicRules.ts                # Type definitions
```

## API Endpoints

- `POST /trainer/logic-rules` - Táº¡o quy táº¯c má»›i
- `GET /trainer/logic-rules` - Láº¥y danh sÃ¡ch quy táº¯c
- `GET /trainer/logic-rules/:id` - Láº¥y chi tiáº¿t quy táº¯c
- `PUT /trainer/logic-rules/:id` - Cáº­p nháº­t quy táº¯c
- `DELETE /trainer/logic-rules/:id` - XÃ³a quy táº¯c

## Responsive Design

- âœ… Mobile-first approach
- âœ… Responsive grid layout
- âœ… Touch-friendly interface
- âœ… Adaptive typography

## Accessibility

- âœ… Keyboard navigation
- âœ… Screen reader support
- âœ… ARIA labels
- âœ… Color contrast compliance

## Performance

- âœ… Lazy loading
- âœ… Memoization
- âœ… Optimized re-renders
- âœ… Efficient state management

## Troubleshooting

### Lá»—i thÆ°á»ng gáº·p

1. **KhÃ´ng táº£i Ä‘Æ°á»£c danh sÃ¡ch quy táº¯c**
   - Kiá»ƒm tra káº¿t ná»‘i máº¡ng
   - Kiá»ƒm tra token xÃ¡c thá»±c
   - Kiá»ƒm tra API endpoint

2. **Drag & drop khÃ´ng hoáº¡t Ä‘á»™ng**
   - Äáº£m báº£o Ä‘Ã£ cÃ i Ä‘áº·t `@hello-pangea/dnd`
   - Kiá»ƒm tra browser support
   - Kiá»ƒm tra touch events trÃªn mobile

3. **Dialog khÃ´ng hiá»ƒn thá»‹**
   - Kiá»ƒm tra z-index
   - Kiá»ƒm tra portal mounting
   - Kiá»ƒm tra CSS conflicts

## TÆ°Æ¡ng lai

- [ ] Há»— trá»£ nhiá»u Ä‘iá»u kiá»‡n phá»©c táº¡p hÆ¡n
- [ ] Backtesting quy táº¯c
- [ ] Import/Export quy táº¯c
- [ ] Template quy táº¯c cÃ³ sáºµn
- [ ] Notification real-time
- [ ] Advanced analytics
- [ ] Multi-language support
